TO DO

 * Lier le formulaire d'inscription parents avec la DB

 * Mettre en place les diffèrents Dashboard (admin, nounou, parent)

 * Sécuriser l'accèes aux pages d'accueil (redirection vers index si non connecté)

 * Ajouter des messages d'erreur (mauvais mdp, compte pas encore validé, compte créer etc)

 * Ajouter test formulaire pour éviter incohérence

--------------------------------------------------------------------------

DOING



--------------------------------------------------------------------------

DONE

  * Login

  * Inscription nounou

  * Dashboard admin: module candidats

--------------------------------------------------------------------------

Data:

compte admin --> admin admin
compte nouvelle nounou --> wololo@utt wololo

--------------------------------------------------------------------------
SQL 'nounoudb' :

-- phpMyAdmin SQL Dump
-- version 4.7.9
-- https://www.phpmyadmin.net/
--
-- Hôte : 127.0.0.1:3306
-- Généré le :  mar. 22 mai 2018 à 21:55
-- Version du serveur :  5.7.21
-- Version de PHP :  5.6.35

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Base de données :  `nounoudb`
--

-- --------------------------------------------------------

--
-- Structure de la table `dispo`
--

DROP TABLE IF EXISTS `dispo`;
CREATE TABLE IF NOT EXISTS `dispo` (
  `dispo_id` int(11) NOT NULL AUTO_INCREMENT,
  `jour` varchar(45) NOT NULL,
  `debut` time NOT NULL,
  `fin` time NOT NULL,
  `nounou_email` varchar(125) NOT NULL,
  PRIMARY KEY (`dispo_id`),
  UNIQUE KEY `dispo_id_UNIQUE` (`dispo_id`),
  KEY `dispo_nounou_email_idx` (`nounou_email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Structure de la table `enfant`
--

DROP TABLE IF EXISTS `enfant`;
CREATE TABLE IF NOT EXISTS `enfant` (
  `enfant_id` int(11) NOT NULL AUTO_INCREMENT,
  `nom` varchar(45) NOT NULL,
  `prenom` varchar(45) NOT NULL,
  `age` int(11) NOT NULL,
  `info` varchar(255) NOT NULL,
  `email_parent` varchar(125) NOT NULL,
  PRIMARY KEY (`enfant_id`),
  UNIQUE KEY `enfant_id_UNIQUE` (`enfant_id`),
  KEY `email_parent_idx` (`email_parent`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Structure de la table `evaluation`
--

DROP TABLE IF EXISTS `evaluation`;
CREATE TABLE IF NOT EXISTS `evaluation` (
  `evalutation_id` int(11) NOT NULL AUTO_INCREMENT,
  `nounou_email` varchar(125) NOT NULL,
  `description` varchar(255) NOT NULL,
  `note` int(11) NOT NULL,
  `parent_email` varchar(125) NOT NULL,
  PRIMARY KEY (`evalutation_id`),
  UNIQUE KEY `evalutation_id_UNIQUE` (`evalutation_id`),
  KEY `nounou_email_idx` (`nounou_email`),
  KEY `parent_email_idx` (`parent_email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Structure de la table `garde`
--

DROP TABLE IF EXISTS `garde`;
CREATE TABLE IF NOT EXISTS `garde` (
  `garde_id` int(11) NOT NULL,
  `debut` timestamp NOT NULL,
  `fin` timestamp NOT NULL,
  `nounou_email` varchar(125) NOT NULL,
  `tarif` float NOT NULL,
  PRIMARY KEY (`garde_id`),
  UNIQUE KEY `garde_id_UNIQUE` (`garde_id`),
  KEY `garde_nounou_email_idx` (`nounou_email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Structure de la table `garde_has_enfant`
--

DROP TABLE IF EXISTS `garde_has_enfant`;
CREATE TABLE IF NOT EXISTS `garde_has_enfant` (
  `garde_id` int(11) NOT NULL,
  `enfant_id` int(11) NOT NULL,
  PRIMARY KEY (`garde_id`,`enfant_id`),
  KEY `fk_garde_has_enfant_enfant1_idx` (`enfant_id`),
  KEY `fk_garde_has_enfant_garde1_idx` (`garde_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- --------------------------------------------------------

--
-- Structure de la table `langue`
--

DROP TABLE IF EXISTS `langue`;
CREATE TABLE IF NOT EXISTS `langue` (
  `langue_id` int(11) NOT NULL AUTO_INCREMENT,
  `nom` varchar(45) NOT NULL,
  PRIMARY KEY (`langue_id`),
  UNIQUE KEY `langue_id_UNIQUE` (`langue_id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;

--
-- Déchargement des données de la table `langue`
--

INSERT INTO `langue` (`langue_id`, `nom`) VALUES
(1, 'anglais'),
(2, 'espagnol'),
(3, 'allemand'),
(4, 'portugais'),
(5, 'russe'),
(6, 'chinois');

-- --------------------------------------------------------

--
-- Structure de la table `utilisateur`
--

DROP TABLE IF EXISTS `utilisateur`;
CREATE TABLE IF NOT EXISTS `utilisateur` (
  `nom` varchar(45) DEFAULT NULL,
  `prenom` varchar(45) DEFAULT NULL,
  `ville` varchar(45) DEFAULT NULL,
  `email` varchar(125) NOT NULL,
  `portable` int(11) DEFAULT NULL,
  `photo` varchar(45) DEFAULT NULL,
  `age` int(11) DEFAULT NULL,
  `experience` varchar(45) DEFAULT NULL,
  `presentation` varchar(145) DEFAULT NULL,
  `type_user` varchar(45) NOT NULL,
  `password` varchar(255) NOT NULL,
  PRIMARY KEY (`email`),
  UNIQUE KEY `email_UNIQUE` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Déchargement des données de la table `utilisateur`
--

INSERT INTO `utilisateur` (`nom`, `prenom`, `ville`, `email`, `portable`, `photo`, `age`, `experience`, `presentation`, `type_user`, `password`) VALUES
(NULL, NULL, NULL, 'admin', NULL, NULL, NULL, NULL, NULL, 'admin', '$2y$10$wVK682RRldlDdcu1ylKJeuii35h.Na2SlztqQ5saHSCfZgdUAClaa'),
('aeht', 'azreh', 'eth', 'test@test', 12, 'C:wamp	mpphpE1EB.tmp', 12, 'occasionnel', 'ezhre', 'await', '$2y$10$ghG1K4mePTyNAdWLYSVSH.RaTZN6two9YbZbPSBMxqouURSBpSQde');

-- --------------------------------------------------------

--
-- Structure de la table `utilisateur_has_langue`
--

DROP TABLE IF EXISTS `utilisateur_has_langue`;
CREATE TABLE IF NOT EXISTS `utilisateur_has_langue` (
  `utilisateur_email` varchar(125) NOT NULL,
  `langue_id` int(11) NOT NULL,
  PRIMARY KEY (`utilisateur_email`,`langue_id`),
  KEY `fk_utilisateur_has_langue_langue1_idx` (`langue_id`),
  KEY `fk_utilisateur_has_langue_utilisateur1_idx` (`utilisateur_email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Déchargement des données de la table `utilisateur_has_langue`
--

INSERT INTO `utilisateur_has_langue` (`utilisateur_email`, `langue_id`) VALUES
('test@test', 3),
('test@test', 5);

--
-- Contraintes pour les tables déchargées
--

--
-- Contraintes pour la table `dispo`
--
ALTER TABLE `dispo`
  ADD CONSTRAINT `dispo_nounou_email` FOREIGN KEY (`nounou_email`) REFERENCES `utilisateur` (`email`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Contraintes pour la table `enfant`
--
ALTER TABLE `enfant`
  ADD CONSTRAINT `email_parent` FOREIGN KEY (`email_parent`) REFERENCES `utilisateur` (`email`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Contraintes pour la table `evaluation`
--
ALTER TABLE `evaluation`
  ADD CONSTRAINT `nounou_email` FOREIGN KEY (`nounou_email`) REFERENCES `utilisateur` (`email`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `parent_email` FOREIGN KEY (`parent_email`) REFERENCES `utilisateur` (`email`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Contraintes pour la table `garde`
--
ALTER TABLE `garde`
  ADD CONSTRAINT `garde_nounou_email` FOREIGN KEY (`nounou_email`) REFERENCES `utilisateur` (`email`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Contraintes pour la table `garde_has_enfant`
--
ALTER TABLE `garde_has_enfant`
  ADD CONSTRAINT `fk_garde_has_enfant_enfant1` FOREIGN KEY (`enfant_id`) REFERENCES `enfant` (`enfant_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_garde_has_enfant_garde1` FOREIGN KEY (`garde_id`) REFERENCES `garde` (`garde_id`) ON DELETE NO ACTION ON UPDATE NO ACTION;

--
-- Contraintes pour la table `utilisateur_has_langue`
--
ALTER TABLE `utilisateur_has_langue`
  ADD CONSTRAINT `fk_utilisateur_has_langue_langue1` FOREIGN KEY (`langue_id`) REFERENCES `langue` (`langue_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `fk_utilisateur_has_langue_utilisateur1` FOREIGN KEY (`utilisateur_email`) REFERENCES `utilisateur` (`email`) ON DELETE NO ACTION ON UPDATE NO ACTION;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
